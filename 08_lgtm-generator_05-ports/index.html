<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>LGTM Generator</title>
  </head>
  <body>
    <div id="app"></div>
    <script src="main.js"></script>
    <script>
      const app = Elm.Main.init({
        node: document.getElementById("app"),
      });

      app.ports.copyToClipboard.subscribe((text) => {
        const input = document.createElement;
        copyToClipboard(text);
      });

      // How ugly is this?
      // https://cekrem.github.io/posts/clipboard-api-how-hard-can-it-be/
      function copyToClipboard(text) {
        const textarea = document.createElement("textarea");
        textarea.value = text;
        textarea.style.position = "fixed";
        textarea.style.opacity = "0";
        document.body.appendChild(textarea);
        textarea.select();

        try {
          document.execCommand("copy");
          return true;
        } catch (err) {
          return false;
        } finally {
          document.body.removeChild(textarea);
        }
      }
    </script>
  </body>
</html>
